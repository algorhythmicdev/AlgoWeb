/* Global animations, typography, and base styles */
:root {
  --surface-glass-bg: color-mix(in srgb, rgba(var(--voyage-blue-rgb), 0.52) 22%, transparent 78%);
  --surface-glass-border: color-mix(
    in srgb,
    rgba(var(--voyage-blue-rgb), 0.48) 58%,
    rgba(255, 255, 255, 0.28) 42%
  );
  --surface-glass-shadow: 0 26px 52px rgba(10, 18, 36, 0.22);
  --surface-chip-bg: color-mix(in srgb, rgba(var(--aurora-purple-rgb), 0.46) 22%, transparent 78%);
  --surface-chip-border: color-mix(
    in srgb,
    rgba(var(--aurora-purple-rgb), 0.44) 60%,
    rgba(255, 255, 255, 0.26) 40%
  );
  --surface-chip-shadow: 0 18px 34px rgba(12, 18, 36, 0.16);
  --surface-chip-color: var(--text-tertiary);
  --surface-chip-hc-bg: transparent;
  --surface-chip-hc-border: currentColor;
  --surface-chip-hc-shadow: none;
  --surface-chip-hc-color: var(--text);
  --surface-pill-bg: color-mix(in srgb, rgba(var(--voyage-blue-rgb), 0.5) 24%, transparent 76%);
  --surface-pill-border: color-mix(
    in srgb,
    rgba(var(--voyage-blue-rgb), 0.42) 58%,
    rgba(255, 255, 255, 0.26) 42%
  );
  --surface-pill-shadow: 0 22px 44px rgba(12, 18, 36, 0.2);
  --surface-pill-hc-bg: transparent;
  --surface-pill-hc-border: currentColor;
  --surface-pill-hc-shadow: none;
  --surface-pill-hc-color: var(--text);
  --surface-field-bg: color-mix(in srgb, rgba(var(--aurora-purple-rgb), 0.42) 18%, transparent 82%);
  --surface-field-border: color-mix(in srgb, rgba(var(--voyage-blue-rgb), 0.26) 64%, rgba(var(--aurora-purple-rgb), 0.28) 36%);
  --surface-field-border-strong: color-mix(in srgb, rgba(var(--voyage-blue-rgb), 0.42) 68%, rgba(var(--aurora-purple-rgb), 0.38) 32%);
  --surface-field-hc-bg: var(--bg);
  --surface-field-hc-border: currentColor;
  --surface-panel-bg: color-mix(in srgb, rgba(var(--voyage-blue-rgb), 0.48) 22%, transparent 78%);
  --surface-panel-border: color-mix(
    in srgb,
    rgba(var(--voyage-blue-rgb), 0.46) 58%,
    rgba(255, 255, 255, 0.26) 42%
  );
  --surface-panel-shadow: 0 22px 46px rgba(12, 18, 36, 0.2);
  --surface-panel-hc-bg: var(--bg);
  --surface-panel-hc-border: currentColor;
  --surface-panel-hc-shadow: none;
  --surface-panel-hc-color: var(--text);
  --surface-glass-blur: blur(22px);
}

body {
  background-color: var(--bg);
  color: var(--text);
  background: var(--bg);
  transition:
    background-color var(--theme-dur, 0.55s) var(--theme-ease, cubic-bezier(0.2, 0.7, 0.2, 1)),
    color var(--theme-dur, 0.55s) var(--theme-ease, cubic-bezier(0.2, 0.7, 0.2, 1));
}

@supports (background-color: color-mix(in srgb, white, transparent)) {
  body {
    background-color: color-mix(in srgb, var(--bg) 78%, transparent);
  }
}

html[data-theme='hc'] body,
html[data-theme='hc'] body::after {
  background-color: var(--bg);
}

body::after {
  content: '';
  position: fixed;
  inset: 0;
  z-index: -3;
  pointer-events: none;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 800"><filter id="f" x="0" y="0" width="100%" height="100%"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="4" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23f)"/></svg>');
  opacity: 0.025;
}

:root,
html,
body,
.themed {
  transition:
    color var(--theme-dur, 0.55s) var(--theme-ease, cubic-bezier(0.2, 0.7, 0.2, 1)),
    background-color var(--theme-dur, 0.55s) var(--theme-ease, cubic-bezier(0.2, 0.7, 0.2, 1)),
    border-color var(--theme-dur, 0.55s) var(--theme-ease, cubic-bezier(0.2, 0.7, 0.2, 1)),
    outline-color var(--theme-dur, 0.55s) var(--theme-ease, cubic-bezier(0.2, 0.7, 0.2, 1)),
    box-shadow var(--theme-dur, 0.55s) var(--theme-ease, cubic-bezier(0.2, 0.7, 0.2, 1));
}

html.nav-menu-open {
  overflow: hidden;
}

.section {
  position: relative;
  padding-block: var(
    --section-padding,
    clamp(var(--section-padding-mobile, 4rem), 8vw, var(--section-padding-desktop, 7rem))
  );
  background: transparent;
  isolation: isolate;
}

.section > .container {
  width: min(100%, var(--section-container-width, var(--container-xl, 1200px)));
  margin-inline: auto;
  padding-inline: clamp(1.5rem, 5vw, 3rem);
}

.section > .container > *:first-child {
  margin-top: 0;
}

.section > .container > *:last-child {
  margin-bottom: 0;
}

:where(a, button, input, textarea, select, summary, [role='button'], [role='link']) {
  outline: none;
  transition:
    outline-color var(--duration-ui, 220ms) var(--ease-out, cubic-bezier(0.22, 1, 0.36, 1)),
    outline-offset var(--duration-ui, 220ms) var(--ease-out, cubic-bezier(0.22, 1, 0.36, 1)),
    box-shadow var(--duration-ui, 220ms) var(--ease-out, cubic-bezier(0.22, 1, 0.36, 1));
}

:where(a, button, input, textarea, select, summary, [role='button'], [role='link']):focus-visible {
  outline: 2px solid var(--focus-ring-color, color-mix(in srgb, var(--voyage-blue) 70%, #ffffff 30%));
  outline-offset: var(--focus-ring-offset, 3px);
  box-shadow: var(--focus-ring-shadow, var(--focus-ring));
}

/* Gradient bar animation */
@keyframes bar-pan {
  from { background-position: 0% 50%; }
  to   { background-position: 100% 50%; }
}

/* Hero variant animations */
@keyframes halo-move { 
  from { transform: translateY(-5%); } 
  to { transform: translateY(5%); } 
}

@keyframes grid-ripple { 
  from { transform: scale(1); } 
  to { transform: scale(1.05); } 
}

@keyframes sweep { 
  to { transform: rotate(1turn); } 
}

@keyframes drift {
  from { transform: translateY(-1%); }
  to { transform: translateY(1%); }
}

.heading {
  position: relative;
  display: inline-block;
  font-weight: var(--weight-black, 800);
  font-size: clamp(2rem, 5vw, 4rem);
  line-height: 1.05;
  color: var(--text);
  padding-bottom: 0.1em;
  z-index: 0;
}

.heading::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: 0;
  width: 100%;
  height: 0.3em;
  background: linear-gradient(var(--grad-angle), var(--grad-a), var(--grad-b));
  animation: bar-pan var(--bar-speed, 16s) ease-in-out infinite alternate;
  z-index: -1;
}

@media (prefers-reduced-motion: reduce),
       (prefers-contrast: more) {
  .heading::after {
    animation: none;
  }
}

/* Accessibility: reduce non-essential animations */
@media (prefers-reduced-motion: reduce){
  * { 
    animation-duration:.001ms !important; 
    animation-iteration-count:1 !important; 
    transition:none !important; 
  }
}

/* Grain overlay */
.grain::after {
  content: "";
  position: absolute;
  inset: 0;
  background-image: var(--grain);
  opacity: 0.04; /* extremely low contrast */
  pointer-events: none;
}

.surface-chip {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.45rem 1rem;
  border-radius: var(--radius-full);
  border: 1px solid var(--surface-chip-border);
  background: var(--surface-chip-bg);
  box-shadow: var(--surface-chip-shadow);
  color: var(--surface-chip-color, var(--text-tertiary));
  font-size: var(--text-small);
  font-weight: var(--weight-semibold);
  letter-spacing: 0.16em;
  text-transform: uppercase;
  backdrop-filter: blur(18px) saturate(1.05);
  -webkit-backdrop-filter: blur(18px) saturate(1.05);
}

.surface-chip[data-tone='accent'] {
  color: color-mix(in srgb, var(--voyage-blue) 68%, var(--text) 32%);
  border-color: color-mix(in srgb, rgba(var(--voyage-blue-rgb), 0.46) 70%, rgba(255, 255, 255, 0.4) 30%);
  background: color-mix(in srgb, var(--surface-chip-bg) 78%, rgba(var(--voyage-blue-rgb), 0.16) 22%);
}

.surface-pill {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.6rem;
  padding: 0.75rem 1.6rem;
  border-radius: clamp(2.4rem, 5vw, 3.4rem);
  border: 1px solid var(--surface-pill-border);
  background: var(--surface-pill-bg);
  box-shadow: var(--surface-pill-shadow);
  backdrop-filter: blur(20px) saturate(1.12);
  -webkit-backdrop-filter: blur(20px) saturate(1.12);
}

.surface-pill[data-tone='accent'] {
  background: color-mix(in srgb, var(--surface-pill-bg) 72%, rgba(var(--aurora-purple-rgb), 0.2) 28%);
  border-color: color-mix(in srgb, rgba(var(--aurora-purple-rgb), 0.42) 65%, rgba(255, 255, 255, 0.38) 35%);
}

.surface-field {
  width: 100%;
  padding: clamp(1rem, 2.4vw, 1.35rem);
  border-radius: var(--radius-xl);
  border: 1px solid var(--surface-field-border);
  background: var(--surface-field-bg);
  color: var(--surface-field-color, var(--text));
  font: inherit;
  transition: border-color var(--duration-fast, 180ms) var(--ease-out, cubic-bezier(0.22, 0.61, 0.36, 1));
}

.surface-field::placeholder {
  color: color-mix(in srgb, var(--text-secondary) 74%, transparent 26%);
}

.surface-field:focus-visible {
  outline: 2px solid color-mix(in srgb, var(--grad-a) 60%, var(--grad-b) 40%);
  outline-offset: 2px;
  border-color: var(--surface-field-border-strong);
}

.surface-field:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.surface-field.error {
  border-color: color-mix(in srgb, var(--cherry-pop) 68%, rgba(var(--cherry-pop-rgb), 0.4) 32%);
}

.surface-panel {
  position: relative;
  display: block;
  padding: clamp(0.9rem, 2.2vw, 1.35rem);
  border-radius: var(--radius-xl);
  border: 1px solid var(--surface-panel-border);
  background: var(--surface-panel-bg);
  box-shadow: var(--surface-panel-shadow);
  backdrop-filter: blur(20px) saturate(1.08);
  -webkit-backdrop-filter: blur(20px) saturate(1.08);
}

.surface-panel[data-tone='accent'] {
  background: color-mix(in srgb, var(--surface-panel-bg) 72%, rgba(var(--aurora-purple-rgb), 0.24) 28%);
  border-color: color-mix(in srgb, rgba(var(--aurora-purple-rgb), 0.4) 62%, rgba(255, 255, 255, 0.34) 38%);
}

html[data-theme='hc'] .surface-chip {
  background: var(--surface-chip-hc-bg, transparent);
  border-color: var(--surface-chip-hc-border, currentColor);
  box-shadow: var(--surface-chip-hc-shadow, none);
  color: var(--surface-chip-hc-color, var(--text));
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

html[data-theme='hc'] .surface-pill {
  background: var(--surface-pill-hc-bg, transparent);
  border-color: var(--surface-pill-hc-border, currentColor);
  box-shadow: var(--surface-pill-hc-shadow, none);
  color: var(--surface-pill-hc-color, var(--text));
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

html[data-theme='hc'] .surface-field {
  background: var(--surface-field-hc-bg, var(--bg));
  border-color: var(--surface-field-hc-border, currentColor);
  box-shadow: none;
  color: var(--surface-field-color, var(--text));
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

html[data-theme='hc'] .surface-panel {
  background: var(--surface-panel-hc-bg, transparent);
  border-color: var(--surface-panel-hc-border, currentColor);
  box-shadow: var(--surface-panel-hc-shadow, none);
  color: var(--surface-panel-hc-color, var(--text));
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

@media (prefers-reduced-motion: reduce) {
  .surface-chip,
  .surface-pill,
  .surface-field,
  .surface-panel {
    transition: none;
  }
}

/* Button system */
.btn {
  --btn-padding-y: 0.9rem;
  --btn-padding-x: 1.75rem;
  --btn-bg: color-mix(in srgb, var(--control-surface) 94%, transparent 6%);
  --btn-border: color-mix(in srgb, var(--control-border) 72%, transparent 28%);
  --btn-color: color-mix(in srgb, var(--text) 88%, rgba(var(--voyage-blue-rgb), 0.12) 12%);
  --btn-shadow: 0 18px 32px rgba(var(--voyage-blue-rgb), 0.16);
  --btn-hover-bg: color-mix(in srgb, var(--control-surface-hover) 92%, rgba(var(--voyage-blue-rgb), 0.12) 8%);
  --btn-hover-border: color-mix(in srgb, var(--control-border-strong) 68%, rgba(var(--voyage-blue-rgb), 0.18) 32%);
  --btn-hover-shadow: 0 22px 38px rgba(var(--voyage-blue-rgb), 0.22);
  --btn-focus-shadow: 0 0 0 6px color-mix(in srgb, rgba(var(--voyage-blue-rgb), 0.18) 70%, transparent 30%);
  --btn-translate: 0;
  --btn-hover-translate: -2px;

  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.55rem;
  padding: var(--btn-padding-y) var(--btn-padding-x);
  border-radius: var(--radius-full);
  border: 1px solid var(--btn-border);
  background: var(--btn-bg);
  color: var(--btn-color);
  font-weight: var(--weight-semibold);
  font-size: clamp(0.95rem, 1.1vw, 1.05rem);
  line-height: 1.1;
  text-decoration: none;
  cursor: pointer;
  box-shadow: var(--btn-shadow);
  backdrop-filter: blur(18px) saturate(1.05);
  -webkit-backdrop-filter: blur(18px) saturate(1.05);
  transform: translateY(var(--btn-translate));
  transition:
    transform var(--duration-ui) var(--ease-out),
    box-shadow var(--duration-ui) var(--ease-out),
    background var(--duration-ui) var(--ease-out),
    border-color var(--duration-ui) var(--ease-out),
    color var(--duration-ui) var(--ease-out);
}

.btn svg {
  flex-shrink: 0;
  transition: transform var(--duration-fast) var(--ease-out);
}

.btn:hover,
.btn:focus-visible {
  background: var(--btn-hover-bg, var(--btn-bg));
  border-color: var(--btn-hover-border, var(--btn-border));
  box-shadow: var(--btn-hover-shadow, var(--btn-shadow));
  transform: translateY(var(--btn-hover-translate));
}

.btn:focus-visible {
  outline: 2px solid var(--focus-ring-color, color-mix(in srgb, var(--voyage-blue) 70%, #ffffff 30%));
  outline-offset: var(--focus-ring-offset, 3px);
  box-shadow: var(--btn-focus-shadow, var(--btn-hover-shadow, var(--btn-shadow))),
    var(--focus-ring-shadow, var(--focus-ring));
}

.btn:disabled,
.btn[aria-disabled='true'] {
  opacity: 0.6;
  pointer-events: none;
  box-shadow: none;
  transform: none;
}

.btn-primary,
.btn-gradient {
  --btn-bg: color-mix(in srgb, var(--bg-elev-1) 94%, rgba(var(--voyage-blue-rgb), 0.1) 6%);
  --btn-border: color-mix(in srgb, rgba(var(--voyage-blue-rgb), 0.35) 70%, rgba(255, 255, 255, 0.4) 30%);
  --btn-color: color-mix(in srgb, var(--voyage-blue) 68%, var(--text) 32%);
  --btn-shadow: 0 18px 34px rgba(var(--voyage-blue-rgb), 0.18);
  --btn-hover-bg: color-mix(in srgb, var(--bg-elev-2) 90%, rgba(var(--voyage-blue-rgb), 0.14) 10%);
  --btn-hover-border: color-mix(in srgb, rgba(var(--voyage-blue-rgb), 0.45) 70%, rgba(255, 255, 255, 0.32) 30%);
  --btn-hover-shadow: 0 24px 42px rgba(var(--voyage-blue-rgb), 0.24);
  --btn-focus-shadow: 0 0 0 6px color-mix(in srgb, rgba(var(--voyage-blue-rgb), 0.22) 70%, transparent 30%);
  --btn-hover-translate: -3px;
}

.btn-secondary {
  --btn-color: color-mix(in srgb, var(--voyage-blue) 72%, var(--text) 28%);
  --btn-bg: color-mix(in srgb, var(--control-surface) 94%, rgba(var(--voyage-blue-rgb), 0.12) 6%);
  --btn-border: color-mix(in srgb, var(--control-border) 74%, rgba(var(--voyage-blue-rgb), 0.16) 26%);
  --btn-shadow: 0 18px 32px rgba(var(--voyage-blue-rgb), 0.14);
  --btn-hover-bg: color-mix(in srgb, var(--control-surface-hover) 92%, rgba(var(--voyage-blue-rgb), 0.16) 8%);
  --btn-hover-border: color-mix(in srgb, var(--control-border-strong) 68%, rgba(var(--voyage-blue-rgb), 0.2) 32%);
  --btn-hover-shadow: 0 22px 36px rgba(var(--voyage-blue-rgb), 0.22);
}

.btn-lg {
  --btn-padding-y: 1.1rem;
  --btn-padding-x: 2.25rem;
  font-size: clamp(1.05rem, 1.4vw, 1.2rem);
}

.btn-block {
  width: 100%;
  display: inline-flex;
  justify-content: center;
}

.hover-lift {
  --btn-hover-translate: -4px;
  --btn-hover-shadow: 0 28px 48px rgba(var(--voyage-blue-rgb), 0.28);
}

.btn:hover svg,
.btn:focus-visible svg {
  transform: translateX(4px);
}

html[data-theme='dark'] .btn {
  --btn-color: color-mix(in srgb, var(--text) 92%, rgba(var(--voyage-blue-rgb), 0.12) 8%);
  --btn-shadow: 0 20px 42px rgba(8, 16, 30, 0.32);
  --btn-hover-shadow: 0 26px 50px rgba(8, 16, 30, 0.38);
  --btn-focus-shadow: 0 0 0 6px color-mix(in srgb, rgba(var(--voyage-blue-rgb), 0.42) 70%, transparent 30%);
}

html[data-theme='dark'] .btn-primary,
html[data-theme='dark'] .btn-gradient {
  --btn-bg: color-mix(in srgb, var(--bg-elev-1) 86%, rgba(var(--voyage-blue-rgb), 0.32) 14%);
  --btn-border: color-mix(in srgb, rgba(var(--voyage-blue-rgb), 0.52) 68%, rgba(242, 245, 249, 0.24) 32%);
  --btn-color: color-mix(in srgb, var(--text) 94%, rgba(var(--voyage-blue-rgb), 0.12) 6%);
  --btn-hover-bg: color-mix(in srgb, var(--bg-elev-2) 84%, rgba(var(--voyage-blue-rgb), 0.36) 16%);
  --btn-hover-border: color-mix(in srgb, rgba(var(--voyage-blue-rgb), 0.58) 70%, rgba(242, 245, 249, 0.28) 30%);
  --btn-hover-shadow: 0 26px 50px rgba(8, 16, 30, 0.4);
  --btn-focus-shadow: 0 0 0 6px color-mix(in srgb, rgba(var(--voyage-blue-rgb), 0.42) 70%, transparent 30%);
}

html[data-theme='hc'] .btn {
  --btn-bg: var(--bg-elev-1);
  --btn-border: var(--border);
  --btn-color: var(--text);
  --btn-shadow: none;
  --btn-hover-bg: var(--bg-elev-1);
  --btn-hover-border: var(--border);
  --btn-hover-shadow: none;
  --btn-focus-shadow: none;
}

html[data-theme='hc'] .btn-primary,
html[data-theme='hc'] .btn-gradient {
  --btn-bg: var(--text);
  --btn-border: var(--text);
  --btn-color: var(--bg);
}

html[data-theme='hc'] .btn-secondary {
  --btn-color: var(--text);
}

@media (prefers-reduced-motion: reduce) {
  .btn {
    --btn-hover-translate: 0 !important;
    --btn-hover-shadow: var(--btn-shadow) !important;
  }

  .btn:hover svg,
  .btn:focus-visible svg {
    transform: none !important;
  }
}
