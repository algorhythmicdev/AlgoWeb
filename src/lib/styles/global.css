/* Global animations, typography, and base styles */
:root {
  --surface-glass-bg: color-mix(in srgb, var(--bg-elev-1) 88%, rgba(var(--voyage-blue-rgb), 0.12) 12%);
  --surface-glass-border: color-mix(in srgb, rgba(var(--voyage-blue-rgb), 0.38) 58%, rgba(255, 255, 255, 0.42) 42%);
  --surface-glass-shadow: 0 26px 56px rgba(10, 18, 36, 0.22);
  --surface-chip-bg: color-mix(in srgb, var(--bg-elev-2) 86%, rgba(var(--aurora-purple-rgb), 0.14) 14%);
  --surface-chip-border: color-mix(in srgb, rgba(var(--voyage-blue-rgb), 0.28) 62%, rgba(255, 255, 255, 0.42) 38%);
  --surface-chip-shadow: 0 18px 36px rgba(12, 18, 36, 0.16);
  --surface-pill-bg: color-mix(in srgb, var(--bg-elev-1) 84%, rgba(var(--voyage-blue-rgb), 0.18) 16%);
  --surface-pill-border: color-mix(in srgb, rgba(var(--voyage-blue-rgb), 0.34) 60%, rgba(255, 255, 255, 0.4) 40%);
  --surface-pill-shadow: 0 22px 48px rgba(12, 18, 36, 0.2);
  --surface-field-bg: color-mix(in srgb, var(--bg-elev-1) 94%, rgba(var(--aurora-purple-rgb), 0.08) 6%);
  --surface-field-border: color-mix(in srgb, rgba(var(--voyage-blue-rgb), 0.18) 68%, rgba(var(--aurora-purple-rgb), 0.22) 32%);
  --surface-field-border-strong: color-mix(in srgb, rgba(var(--voyage-blue-rgb), 0.34) 70%, rgba(var(--aurora-purple-rgb), 0.36) 30%);
  --surface-panel-bg: color-mix(in srgb, var(--bg-elev-2) 86%, rgba(var(--voyage-blue-rgb), 0.16) 14%);
  --surface-panel-border: color-mix(in srgb, rgba(var(--voyage-blue-rgb), 0.32) 64%, rgba(255, 255, 255, 0.36) 36%);
  --surface-panel-shadow: 0 22px 48px rgba(12, 18, 36, 0.2);
  --surface-glass-blur: blur(22px);
}



/* Gradient bar animation */
@keyframes bar-pan {
  from { background-position: 0% 50%; }
  to   { background-position: 100% 50%; }
}

/* Hero variant animations */
@keyframes halo-move { 
  from { transform: translateY(-5%); } 
  to { transform: translateY(5%); } 
}

@keyframes grid-ripple { 
  from { transform: scale(1); } 
  to { transform: scale(1.05); } 
}

@keyframes sweep { 
  to { transform: rotate(1turn); } 
}

@keyframes drift {
  from { transform: translateY(-1%); }
  to { transform: translateY(1%); }
}

.heading {
  position: relative;
  display: inline-block;
  font-weight: var(--weight-black, 800);
  font-size: clamp(2rem, 5vw, 4rem);
  line-height: 1.05;
  color: var(--text);
  padding-bottom: 0.1em;
  z-index: 0;
}

.heading::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: 0;
  width: 100%;
  height: 0.3em;
  background: linear-gradient(var(--grad-angle), var(--grad-a), var(--grad-b));
  animation: bar-pan var(--bar-speed, 16s) ease-in-out infinite alternate;
  z-index: -1;
}

@media (prefers-reduced-motion: reduce),
       (prefers-contrast: more) {
  .heading::after {
    animation: none;
  }
}

/* Accessibility: reduce non-essential animations */
@media (prefers-reduced-motion: reduce){
  * { 
    animation-duration:.001ms !important; 
    animation-iteration-count:1 !important; 
    transition:none !important; 
  }
}

/* Glass effect */
.glass {
  background: var(--surface-glass-bg);
  backdrop-filter: var(--surface-glass-blur) saturate(1.1);
  border: 1px solid var(--surface-glass-border);
  box-shadow: var(--surface-glass-shadow);
}

/* Grain overlay */
.grain::after {
  content: "";
  position: absolute;
  inset: 0;
  background-image: var(--grain);
  opacity: 0.04; /* extremely low contrast */
  pointer-events: none;
}

.surface-chip {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.45rem 1rem;
  border-radius: var(--radius-full);
  border: 1px solid var(--surface-chip-border);
  background: var(--surface-chip-bg);
  box-shadow: var(--surface-chip-shadow);
  color: var(--text-tertiary);
  font-size: var(--text-small);
  font-weight: var(--weight-semibold);
  letter-spacing: 0.16em;
  text-transform: uppercase;
  backdrop-filter: blur(18px) saturate(1.05);
}

.surface-chip[data-tone='accent'] {
  color: color-mix(in srgb, var(--voyage-blue) 68%, var(--text) 32%);
  border-color: color-mix(in srgb, rgba(var(--voyage-blue-rgb), 0.46) 70%, rgba(255, 255, 255, 0.4) 30%);
  background: color-mix(in srgb, var(--surface-chip-bg) 78%, rgba(var(--voyage-blue-rgb), 0.16) 22%);
}

.surface-pill {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.6rem;
  padding: 0.75rem 1.6rem;
  border-radius: clamp(2.4rem, 5vw, 3.4rem);
  border: 1px solid var(--surface-pill-border);
  background: var(--surface-pill-bg);
  box-shadow: var(--surface-pill-shadow);
  backdrop-filter: blur(20px) saturate(1.12);
}

.surface-pill[data-tone='accent'] {
  background: color-mix(in srgb, var(--surface-pill-bg) 72%, rgba(var(--aurora-purple-rgb), 0.2) 28%);
  border-color: color-mix(in srgb, rgba(var(--aurora-purple-rgb), 0.42) 65%, rgba(255, 255, 255, 0.38) 35%);
}

.surface-field {
  width: 100%;
  padding: clamp(1rem, 2.4vw, 1.35rem);
  border-radius: var(--radius-xl);
  border: 1px solid var(--surface-field-border);
  background: var(--surface-field-bg);
  color: var(--text);
  font: inherit;
  transition: border-color var(--duration-fast, 180ms) var(--ease-out, cubic-bezier(0.22, 0.61, 0.36, 1));
}

.surface-field::placeholder {
  color: color-mix(in srgb, var(--text-secondary) 74%, transparent 26%);
}

.surface-field:focus-visible {
  outline: 2px solid color-mix(in srgb, var(--grad-a) 60%, var(--grad-b) 40%);
  outline-offset: 2px;
  border-color: var(--surface-field-border-strong);
}

.surface-field:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.surface-field.error {
  border-color: color-mix(in srgb, var(--cherry-pop) 68%, rgba(var(--cherry-pop-rgb), 0.4) 32%);
}

.surface-panel {
  position: relative;
  display: block;
  padding: clamp(0.9rem, 2.2vw, 1.35rem);
  border-radius: var(--radius-xl);
  border: 1px solid var(--surface-panel-border);
  background: var(--surface-panel-bg);
  box-shadow: var(--surface-panel-shadow);
  backdrop-filter: blur(20px) saturate(1.08);
  -webkit-backdrop-filter: blur(20px) saturate(1.08);
}

.surface-panel[data-tone='accent'] {
  background: color-mix(in srgb, var(--surface-panel-bg) 72%, rgba(var(--aurora-purple-rgb), 0.24) 28%);
  border-color: color-mix(in srgb, rgba(var(--aurora-purple-rgb), 0.4) 62%, rgba(255, 255, 255, 0.34) 38%);
}

html[data-theme='hc'] .surface-chip,
html[data-theme='hc'] .surface-pill,
html[data-theme='hc'] .surface-field,
html[data-theme='hc'] .surface-panel {
  background: transparent;
  box-shadow: none;
  border-color: currentColor;
}

@media (prefers-reduced-motion: reduce) {
  .surface-chip,
  .surface-pill,
  .surface-field,
  .surface-panel {
    transition: none;
  }
}

/* Button system */
.btn {
  --btn-padding-y: 0.9rem;
  --btn-padding-x: 1.75rem;
  --btn-bg: color-mix(in srgb, var(--control-surface) 94%, transparent 6%);
  --btn-border: color-mix(in srgb, var(--control-border) 72%, transparent 28%);
  --btn-color: color-mix(in srgb, var(--text) 88%, rgba(var(--voyage-blue-rgb), 0.12) 12%);
  --btn-shadow: 0 18px 32px rgba(var(--voyage-blue-rgb), 0.16);
  --btn-hover-bg: color-mix(in srgb, var(--control-surface-hover) 92%, rgba(var(--voyage-blue-rgb), 0.12) 8%);
  --btn-hover-border: color-mix(in srgb, var(--control-border-strong) 68%, rgba(var(--voyage-blue-rgb), 0.18) 32%);
  --btn-hover-shadow: 0 22px 38px rgba(var(--voyage-blue-rgb), 0.22);
  --btn-focus-shadow: var(--btn-hover-shadow);
  --btn-translate: 0;
  --btn-hover-translate: -2px;

  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.55rem;
  padding: var(--btn-padding-y) var(--btn-padding-x);
  border-radius: var(--radius-full);
  border: 1px solid var(--btn-border);
  background: var(--btn-bg);
  color: var(--btn-color);
  font-weight: var(--weight-semibold);
  font-size: clamp(0.95rem, 1.1vw, 1.05rem);
  line-height: 1.1;
  text-decoration: none;
  cursor: pointer;
  box-shadow: var(--btn-shadow);
  backdrop-filter: blur(18px) saturate(1.05);
  -webkit-backdrop-filter: blur(18px) saturate(1.05);
  transform: translateY(var(--btn-translate));
  transition:
    transform var(--duration-ui) var(--ease-out),
    box-shadow var(--duration-ui) var(--ease-out),
    background var(--duration-ui) var(--ease-out),
    border-color var(--duration-ui) var(--ease-out),
    color var(--duration-ui) var(--ease-out);
}

.btn svg {
  flex-shrink: 0;
  transition: transform var(--duration-fast) var(--ease-out);
}

.btn:hover,
.btn:focus-visible {
  background: var(--btn-hover-bg, var(--btn-bg));
  border-color: var(--btn-hover-border, var(--btn-border));
  box-shadow: var(--btn-hover-shadow, var(--btn-shadow));
  transform: translateY(var(--btn-hover-translate));
}

.btn:focus-visible {
  outline: none;
  box-shadow: var(--btn-focus-shadow, var(--btn-hover-shadow, var(--btn-shadow))), var(--focus-ring);
}

.btn:disabled,
.btn[aria-disabled='true'] {
  opacity: 0.6;
  pointer-events: none;
  box-shadow: none;
  transform: none;
}

.btn-primary,
.btn-gradient {
  --btn-bg: linear-gradient(
    135deg,
    color-mix(in srgb, var(--grad-a) 94%, transparent) 0%,
    color-mix(in srgb, var(--grad-b) 92%, transparent) 100%
  );
  --btn-border: color-mix(in srgb, var(--grad-a) 56%, transparent 44%);
  --btn-color: #ffffff;
  --btn-shadow: 0 22px 38px rgba(var(--voyage-blue-rgb), 0.26);
  --btn-hover-bg: linear-gradient(
    135deg,
    color-mix(in srgb, var(--grad-a) 98%, transparent) 0%,
    color-mix(in srgb, var(--grad-b) 96%, transparent) 100%
  );
  --btn-hover-border: color-mix(in srgb, var(--grad-a) 64%, transparent 36%);
  --btn-hover-shadow: 0 26px 44px rgba(var(--voyage-blue-rgb), 0.32);
  --btn-focus-shadow: var(--btn-hover-shadow);
}

.btn-secondary {
  --btn-color: color-mix(in srgb, var(--voyage-blue) 72%, var(--text) 28%);
  --btn-bg: color-mix(in srgb, var(--control-surface) 94%, rgba(var(--voyage-blue-rgb), 0.12) 6%);
  --btn-border: color-mix(in srgb, var(--control-border) 74%, rgba(var(--voyage-blue-rgb), 0.16) 26%);
  --btn-shadow: 0 18px 32px rgba(var(--voyage-blue-rgb), 0.14);
  --btn-hover-bg: color-mix(in srgb, var(--control-surface-hover) 92%, rgba(var(--voyage-blue-rgb), 0.16) 8%);
  --btn-hover-border: color-mix(in srgb, var(--control-border-strong) 68%, rgba(var(--voyage-blue-rgb), 0.2) 32%);
  --btn-hover-shadow: 0 22px 36px rgba(var(--voyage-blue-rgb), 0.22);
}

.btn-lg {
  --btn-padding-y: 1.1rem;
  --btn-padding-x: 2.25rem;
  font-size: clamp(1.05rem, 1.4vw, 1.2rem);
}

.btn-block {
  width: 100%;
  display: inline-flex;
  justify-content: center;
}

.hover-lift {
  --btn-hover-translate: -4px;
  --btn-hover-shadow: 0 28px 48px rgba(var(--voyage-blue-rgb), 0.28);
}

.btn:hover svg,
.btn:focus-visible svg {
  transform: translateX(4px);
}

html[data-theme='dark'] .btn {
  --btn-color: color-mix(in srgb, var(--text) 92%, rgba(var(--voyage-blue-rgb), 0.12) 8%);
  --btn-shadow: 0 20px 42px rgba(8, 16, 30, 0.32);
  --btn-hover-shadow: 0 26px 50px rgba(8, 16, 30, 0.38);
  --btn-focus-shadow: var(--btn-hover-shadow);
}

html[data-theme='hc'] .btn {
  --btn-bg: var(--bg-elev-1);
  --btn-border: var(--border);
  --btn-color: var(--text);
  --btn-shadow: none;
  --btn-hover-bg: var(--bg-elev-1);
  --btn-hover-border: var(--border);
  --btn-hover-shadow: none;
  --btn-focus-shadow: none;
}

html[data-theme='hc'] .btn-primary,
html[data-theme='hc'] .btn-gradient {
  --btn-bg: var(--text);
  --btn-border: var(--text);
  --btn-color: var(--bg);
}

html[data-theme='hc'] .btn-secondary {
  --btn-color: var(--text);
}

@media (prefers-reduced-motion: reduce) {
  .btn {
    --btn-hover-translate: 0 !important;
    --btn-hover-shadow: var(--btn-shadow) !important;
  }

  .btn:hover svg,
  .btn:focus-visible svg {
    transform: none !important;
  }
}
